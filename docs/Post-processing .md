# Post-processing and analysis tools

nto post-processing and analysis using a variety of tools provided by GROMACS. These tools allow us to extract valuable insights from the simulation trajectory. Specifically, we'll explore functionalities to generate thermodynamic properties, as well as tools to derive radial distribution functions and correlation functions.
# extract and plot thermodynamic properties from a GROMACS simulation

Throughout a simulation, it's crucial to continuously track various thermodynamic properties to ensure adherence to our intended trajectory. For this purpose, we employ the "gmx energy" command.

This command efficiently processes an edr file, producing an output file in xvg format. This formatted data enables us to effectively visualize and analyze our results through plotting.


```bash
gmx energy -f em.edr -o temperature_02.xvg 
```
When running this, you will get a prompt asking which property you would like output 

Enter the 15 to generate an XMGrace file that includes the variation of the temperature over time. You will need to press Enter twice.

Now that we have our xvg file we can create a plot to observe how the selected property evolved along the simulation.
# Visualising with VMD
# Generating an index file

By default GROMACS creates a default index file for your system. This means that when you don’t specify an index file GROMACS will use the default one.

In most cases, the default index file provided by GROMACS will do just fine.

However, in some others, this might not be enough, and you will need to create your own index file with some special groups of atoms that you need for your investigations.

gmx make_ndx -f system.gro -o index.ndx

In the bottom of the screen you will find a series of commands that you can use to create new groups for your analysis
# Root mean squared deviation
 gmx rms -s npt.tpr -f traj.trr -n 5pep.ndx -o rmsd.xvg -tu ns


 Select option 4 to do the Backbone of the protein. The -tu option gives the time unit.

# Resuming a simulation:

In the event of a simulation interruption, there's no need for concern. GROMACS offers a straightforward method to resume your simulation seamlessly.

By default, GROMACS periodically writes a checkpoint file of your system in the "cpt" format (e.g., "md.cpt") approximately every 15 minutes. Additionally, it automatically creates a backup of the previous checkpoint as "md_prev.cpt".

These checkpoint files contain a comprehensive depiction of the system, encompassing coordinates and velocities with utmost precision. Consequently, you can effortlessly continue your simulation from the last checkpoint, effectively bypassing the interruption.

To resume your simulation, simply invoke the "gmx mdrun" command with the "-cpi" flag followed by the checkpoint file. Here's an illustrative example:
```bash
gmx mdrun -v -deffnm md -cpi md.cpt (-cpt 5)
```

We will continue the simulation from the md.cpt provided via the -cpi flag.


NB:you can change the frequency of the checkpoint output. -cpt 5 will write a checkpoint file every 5 minutes. Just in case.


# Extending a simulation:

Encountering the need to extend a simulation is another potential challenge you may face.

There are instances where you run a simulation for a specified duration, only to realize upon completion that you wish to continue further. In such scenarios, the built-in "gmx convert-tpr" module comes to the rescue.

This module empowers you to manipulate the ".tpr" files generated by the "gmx grompp" module in various ways. Notably, you can opt to extend the simulation duration for a specific ".tpr" file.

This process involves two key steps:

    Initially, you extend the simulation duration by utilizing the "gmx convert-tpr" module, which generates a new ".tpr" file with the desired additional time.

    Subsequently, you execute the new ".tpr" file, initiating the simulation from the last checkpoint, as previously explained.


    Let’s say you finished a 10 ns simulation from a tpr file (md_10.tpr) but then you realized you would like to simulate your system for an additional 10 ns.

You can use the gmx convert-tpr as follows:


gmx_mpi convert-tpr -s md_10.tpr -extend 10000 -o md_20.tpr (-nsteps) (-until)

You can also decide to extend the simulation for a given number of steps (10 steps: -nsteps 10) or until a certain ending time in ps (100 ns ending time: -until 100000). With -nsteps -1 you will get an infinite number of steps so that you can decide when to stop the simulation.

Now we can run the new tpr file (md_20.tpr) starting from the last checkpoint.

gmx mdrun -v -deffnm md_20 -cpi md_10.cpt -noappend

after the simulation finished
You can finally proceed to concatenate the new trajectory to the previous one using

gmx trjcat -f md_10.xtc md_20.part0002.xtc -o final.xtc
